<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="google-site-verification" content="VOdSVFLZgu5oX1fWGwT5OkE9QF-b6k3XMEZIkFIuiTA" />

<title>highlight.jsを使ってみる - ◯ △ □</title>

<link rel="icon" href="https://blog.yudppp.com/img/favicon.png">
<link rel="shortcut icon" href="https://blog.yudppp.com/img/favicon.png">
<link rel="stylesheet" href="https://blog.yudppp.com/css/lib.min.css">
<link rel="stylesheet" href="https://blog.yudppp.com/css/app.min.css">
<link rel="alternate" href="https://blog.yudppp.com/index.xml" title="" type="application/rss+xml">

<meta property="og:type", content="article">
<meta property="og:url", content="https://blog.yudppp.com/posts/highlight-js/">
<meta property="og:site_name", content="◯ △ □">
<meta property="og:title", content="highlight.jsを使ってみる">


  <meta name="description" content="はじめに codeにsyntax highlightが当たらないのが辛かったのでテーマを新たにつくっていい感じにsyntax highlightを効かせることにしました。 syntax highlightについて調べてみるとisagalaev/highlight.jsというライブラリがよさそうだったのでこちらを使うことにしました。
Ghostのcode blockの仕様 TryGhost/Ghost/issues/2675で話し合われた結果
```javascript ```  のように書くとprefixにlanguage-が補完されるようになっています。
highligh.jsの実装をみてみるとlanguage-をのぞいて上手いこと言語の判断をしてくれるようだった。
ErisDS/showdown/showdown.js#L1032-1036
src/highlight.js#L42-46
highlight.jsの特徴  112 languages and 49 styles
 112の言語と49のスタイルに対応している。
 automatic language detection
 自動的な言語検出を行う。
 multi-language code highlighting
 マルチ言語のハイライト
 available for node.js
 node.jsで利用可能である
 works with any markup
 どのようなマークアップでも働く
 compatible with any js framework
 どんなjsフレームワークでも使える(jQuery等に依存してない)
こんな特徴があるらしいです。
highlight.jsを使ってみる 最初にisagalaev/highlight.jsに言われるがままに
&lt;link rel=&quot;stylesheet&quot; href=&quot;//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css&quot;&gt; &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;  をすべてのpageに対応させたかったのでdefault.hbs(もちろんthemeによっては変わってきますが)に入れました。 Casperであればdefault.">


  </head>
  <body class="hack">
    <header>
  <div class="container">
    
    <div class="nav">
      <div class="nav__left">
        <span class="nav__item">
          <a class="nocolor" href="https://blog.yudppp.com">
            <canvas class="mini-logo" width="150" height="50">
          </a>
        </span>
      </div>
    </div>
    <div class="title">
      <h1>highlight.jsを使ってみる</h1>
    </div>
    
  </div>
</header>

    <main>
      <div class="container">
        <date>2015.01.11</date>
        <div class="content">
          

<h2 id="はじめに">はじめに</h2>

<p>codeにsyntax highlightが当たらないのが辛かったのでテーマを新たにつくっていい感じにsyntax highlightを効かせることにしました。
syntax highlightについて調べてみると<a href="https://github.com/isagalaev/highlight.js">isagalaev/highlight.js</a>というライブラリがよさそうだったのでこちらを使うことにしました。</p>

<h2 id="ghostのcode-blockの仕様">Ghostのcode blockの仕様</h2>

<p><a href="https://github.com/TryGhost/Ghost/issues/2675">TryGhost/Ghost/issues/2675</a>で話し合われた結果</p>

<pre><code class="hljs autohotkey"> <span class="hljs-escape">```</span>javascript
 <span class="hljs-escape">```</span>
</code></pre>

<p>のように書くとprefixに<code>language-</code>が補完されるようになっています。</p>

<p>highligh.jsの実装をみてみると<code>language-</code>をのぞいて上手いこと言語の判断をしてくれるようだった。</p>

<p><a href="https://github.com/ErisDS/showdown/blob/master/src/showdown.js#L1032-1036">ErisDS/showdown/showdown.js#L1032-1036</a></p>

<p><a href="https://github.com/isagalaev/highlight.js/blob/master/src/highlight.js#L42-46">src/highlight.js#L42-46</a></p>

<h2 id="highlight-jsの特徴">highlight.jsの特徴</h2>

<blockquote>
<p>112 languages and 49 styles</p>
</blockquote>

<p>112の言語と49のスタイルに対応している。</p>

<blockquote>
<p>automatic language detection</p>
</blockquote>

<p>自動的な言語検出を行う。</p>

<blockquote>
<p>multi-language code highlighting</p>
</blockquote>

<p>マルチ言語のハイライト</p>

<blockquote>
<p>available for node.js</p>
</blockquote>

<p>node.jsで利用可能である</p>

<blockquote>
<p>works with any markup</p>
</blockquote>

<p>どのようなマークアップでも働く</p>

<blockquote>
<p>compatible with any js framework</p>
</blockquote>

<p>どんなjsフレームワークでも使える(jQuery等に依存してない)</p>

<p>こんな特徴があるらしいです。</p>

<h2 id="highlight-jsを使ってみる">highlight.jsを使ってみる</h2>

<p>最初に<a href="https://github.com/isagalaev/highlight.js">isagalaev/highlight.js</a>に言われるがままに</p>

<pre><code class="language-html">&lt;link rel=&quot;stylesheet&quot; href=&quot;//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css&quot;&gt;
&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;
</code></pre>

<p>をすべてのpageに対応させたかったのでdefault.hbs(もちろんthemeによっては変わってきますが)に入れました。
Casperであれば<a href="https://github.com/TryGhost/Casper/blob/master/default.hbs#L20">default.hbs#L20</a>のあたりに追加しました。</p>

<p>その後確認してみるとhighlightが自分の予想していない場所についてしまったりしました。。</p>

<blockquote>
<p>automatic language detection</p>
</blockquote>

<p>が勝手に働いてしまっていました。勝手についてしまっていたコードが自分があまり使わなそうな言語だったりしたので、</p>

<p><a href="https://highlightjs.org/download/">download</a>から自分が使う必要最小限の言語を選択しダウンロードしたところ上手くハイライトがつくようになりました。</p>

<h2 id="highlightを消したいとき">highlightを消したいとき</h2>

<p>highlightを付けたくないときhighlight.jsではnohighlightとかつければよいようです。</p>

<p><code>/no(-?)highlight|plain|text/</code>こちらに含まれればよいのでtypo数的に<code>text</code>を積極的に使おうと思いました。</p>

<h2 id="まとめ">まとめ</h2>

<p>cssとjsを入れるだけで簡単にsyntax highligtが効くようになったので幸せでした。</p>

<h2 id="参考にしたもの">参考にしたもの</h2>

<p><a href="https://highlightjs.org/">https://highlightjs.org/</a>
<a href="https://github.com/isagalaev/highlight.js">https://github.com/isagalaev/highlight.js</a>
<a href="https://github.com/ErisDS/showdown">https://github.com/ErisDS/showdown</a></p>

          <a href="https://twitter.com/share" class="twitter-share-button" data-via="yudppp">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard-noballoon" data-hatena-bookmark-lang="en" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
          <div class="comment">
    <div>
        <a id="js-open-comment" class="event">
            show comment <span class="disqus-comment-count" data-disqus-url="https://blog.yudppp.com/posts/highlight-js/"></span>
        </a>
    </div>
    <div id="disqus_thread"></div>
</div>
<script type="text/javascript">
     
     
    var openDiqus = function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//yudppp.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    document.all("js-open-comment").style.display = "none";
    };
    document.getElementById("js-open-comment").addEventListener('click',openDiqus,false);
</script>
        </div>
      </div>
    </main>
    
<div class="container">
	<div class="prevnext">
		
		<a class="pull-left" href="https://blog.yudppp.com/posts/iojs-nvm/">
			<div>&lt;&lt; io.jsをnvmで管理する</div>
		</a>
		
		
		<a class="pull-right" href="https://blog.yudppp.com/posts/react/">
			<div>はじめてのReact.js &gt;&gt;</div>
		</a>
		
	</div>
</div>

    <div class="container">
  <a href="https://blog.yudppp.com/posts/whoami/">
    <div class="media profile">
      <div class="media-left">
        <img class="avatarholder" src="https://blog.yudppp.com/img/profile.svg" />
      </div>
      <div class="media-body">
        <div class="media-heading">@yudppp</div>
        <div class="media-content">Web engineer.</div>
      </div>
    </div>
  </a>
</div>

    <script src="https://blog.yudppp.com/js/lib.min.js"></script>
<script src="https://blog.yudppp.com/js/app.min.js"></script>
<script id="dsq-count-scr" src="//yudppp.disqus.com/count.js" async></script>
  </body>
</html>
